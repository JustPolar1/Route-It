<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Quejas</title>
        <link href="\styles\main.css" rel="stylesheet">
        <link rel="stylesheet" href="/styles/estilos.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body id="lokeseaxd">
        <nav>
            <div class="barra-superior">
                <ul class="indices-izq">
                    <li></i></a></li>
                </ul>
                <h1 id="titulo4"><a href="/" >Route-It</a></h1>
                <ul class="indices-der">
                    <li id="usuario">
                        <a href="javascript:void(0);"><i class="fas fa-user"></i></a>
                    </li>
                </ul>
            </div>
        </nav>
    
        <div class="inicio">
            <form action="/index.html" method="post">
                <h2 id="titulo">Quejas</h2>
                <label>Ruta a la que va dirigida la queja</label>
                <select id="ruta" name="ruta_id" placeholder="Ruta..." required>

                </select>

                <label>Describe tu queja con respeto:</label>
                <textarea name="comentario" required rows="7" placeholder="Mi queja..."></textarea>
                <button id="baton" type="submit">Enviar</button>
            </form>
        </div>

        <script src="/scripts/main.js"></script>
        <script>
            const orgs = document.getElementById("ruta");

            fetch("/rutas").then(results => results.json())
            .then(rutas => {
                /** Ejemplo de respuesta
                [
                    {
                        "organizacion_id": 1,
                        "organizacion_nombre": "UTCh"
                    }
                ],
                ...
                */
                rutas.forEach(rutas_info => {
                    const option = document.createElement('option');  // Crear un nuevo <option>
                    option.value = rutas_info.ruta_id;      // Asignar el valor al atributo 'value'
                    option.textContent = rutas_info.ruta_nombre; // Asignar el texto visible de la opción
                
                    orgs.appendChild(option);  // Agregar la opción al <select>
                });
            });
        </script>
    </body>
</html> 